" Binds

sanitise tridactyllocal tridactylsync

" Pin a tab
bind <C-p> pin
" Do not close pinned tabs
set tabclosepinned false

" Reverse the direction of tabnext/tabprev to make it more natural
bind J tabnext
bind K tabprev

" Unbinding commands that I won't use.
" See https://github.com/tridactyl/tridactyl/blob/master/src/lib/config.ts for their original bindings
" See :viewconfig for all active bindings
unbind <A-p>
unbind <A-m>
unbind <C-x>
unbind <C-b>
unbind <C-v>
unbind <C-a>
unbind <C-f>
unbind <C-e>
unbind <C-y>
unbind <F1>
unbind <ys>
unbind <yc>
unbind <ym>
unbind <yo>
unbind <yt>
unbind <gh>
unbind <gH>
unbind <gx0>
unbind <gx$>
unbind <g?>
unbind <g!>
unbind <g;>
unbind <gT>
unbind <ZZ>
unbind <a>
unbind <A>
unbind <zm>
unbind <zr>
unbind <zM>
unbind <zR>

" Comment toggler for Reddit, Hacker News and Lobste.rs
bind ,c hint -Jc [class*="expand"],[class*="togg"],[class="comment_folder"]
" Git{Hub,Lab} git clone via SSH yank
bind yg composite js "git clone " + document.location.href.replace(/https?:\/\//,"git@").replace("/",":").replace(/$/,".git") | clipboard yank

" Open image / ... in new tab
bind ,i hint -i
bind ,I hint -I

" Hover over a link
" Taken from https://github.com/tridactyl/tridactyl/issues/1358
bind ,h hint -F e => e.dispatchEvent(new MouseEvent('mouseover', {}))

" Copy link to clipboard
bind yl hint -y
" Copy link anchor to clipboard
 bind y# hint -#

set newtab about:blank

" Only hint search results on Google and DDG
bindurl www.google.com f hint -Jc #search div:not(.action-menu) > a
bindurl www.google.com F hint -Jbc #search div:not(.action-menu) > a
bindurl ^https://duckduckgo.com f hint -Jc [data-testid="result-title-a"]
bindurl ^https://duckduckgo.com F hint -Jbc [data-testid="result-title-a"]

" Handy multiwindow/multitasking binds
bind gd tabdetach
bind gD composite tabduplicate; tabdetach

" Sane hinting mode
set hintfiltermode vimperator-reflow
set hintnames numeric

set searchengine duckduckgo

bind / fillcmdline find
bind n findnext 1
bind N findnext -1
" Add `nohlsearch` to the default behavior of <Escape>
bind <Escape> composite mode normal ; hidecmdline ; nohlsearch

" For syntax highlighting see https://github.com/tridactyl/vim-tridactyl
" vim: set filetype=tridactyl
